<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>绘制图案</title>
</head>
<body>
<canvas id="canvas"></canvas>
<input type="radio" name="rp" id="repeat" checked="checked">repeat
<input type="radio" name="rp" id="repeat-x">repeatx
<input type="radio" name="rp" id="repeat-y">repeaty
<input type="radio" name="rp" id="no-repeat">norepeat
<script>
	var canvas=document.getElementById('canvas'),
		ctx=canvas.getContext('2d'),
		image=new Image(),
		rds=document.getElementsByName('rp');

	function fillCanvas(repeatType){
		var pattern=ctx.createPattern(image,repeatType);
		ctx.clearRect(0,0,canvas.width,canvas.height);
		ctx.fillStyle=pattern;
		ctx.fillRect(0,0,canvas.width,canvas.height);
		// ctx.fill();
	}

	for(var i=0,len=rds.length;i<len;i++){
		(function(j){
			rds[j].onclick=function(e){
				var rpType=this.id;
				fillCanvas(rpType);
			};
		}(i));
	}

	image.src='../img/closer.png';
	image.onload=function(e){
		fillCanvas('repeat');
	};
</script>
</body>
</html>